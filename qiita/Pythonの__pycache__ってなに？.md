## そもそも`__pycache__`とは

Pythonでコードを実行すると、ソースコード（`.py`）をそのまま実行するのではなく、一度「バイトコード（`.pyc`）」という形式にコンパイルしてから動きます

- `.py` → コンパイル → `.pyc`
- 生成された `.pyc` は `__pycache__` ディレクトリに入る
- 次回以降は `.pyc` を読み込むので起動が少し速くなる

ファイル名にはPythonのバージョンや最適化情報が付く
```sh
__pycache__/
example.cpython-311.pyc
```

## `import`との関係

Pythonで `import` をしたとき、以下の流れとなるようです

1. まず `__pycache__` の中に `.pyc` があるかを探す
2. あればそれをロードする（＝ソースを毎回解釈しない）
3. なければ `.py` を読み込んで `.pyc` を新しく生成する

この前提を知っておくと'import'エラーが起こったときに役立つときがあるかもしれません

## 消していいの？

結論：**消してOK**
キャッシュなので削除しても次回 `import` 時にまた作られます

## Gitでの扱い
`__pycache__` をリポジトリに含める必要はありません
`.gitignore` に追記して無視しましょう

```gitignore
# Python cache
__pycache__/
*.pyc
```

## クリアしたいとき
環境切り替えとかでキャッシュが邪魔になるときは、一括削除すればOKです。
```sh
find . -name "__pycache__" -exec rm -rf {} +
```
> 引用元：[Qiita - __pycache__を一括で削除する](https://qiita.com/t3tra/items/608642470e0e379fd632)

また `python -B` オプションを付けると、キャッシュを作らずに実行できます。

## まとめ

- `__pycache__` はPythonのキャッシュ（.pyc）
- `import` するときはまずここを見に行く
- キャッシュなので消しても問題ない。Gitに入れない
- 不要なときは生成スキップも可能(`python -B`)